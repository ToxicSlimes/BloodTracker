<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BloodTracker</title>
    <meta name="google-client-id" content="118121261230-dtj72qp42r44mgpdbng83a1bju3oj87t.apps.googleusercontent.com">

    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#00ff00">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- CSS bundle (Vite-built from 18 source files) -->
    <link rel="stylesheet" href="dist/css/style.css?v=20260214b">
</head>
<body class="crt">
<div class="flicker-overlay"></div>
<div class="vignette-overlay"></div>
<div class="noise-overlay"></div>
<div class="ascii-progress-bar" id="ascii-progress-bar">
    <div class="progress-bar-content">
        <div class="progress-bar-frame">
            <div class="progress-bar-fill" id="progress-bar-fill"></div>
            <div class="progress-bar-text" id="progress-bar-text">0%</div>
        </div>
    </div>
</div>
<div class="torch torch-left">
    <div class="torch-flame-container">
        <div class="torch-flame-ascii">⠀⠀⠀⠀⠀⠀⢱⣆⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠈⣿⣷⡀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢸⣿⣿⣷⣧⠀⠀⠀
⠀⠀⠀⠀⡀⢠⣿⡟⣿⣿⣿⡇⠀⠀
⠀⠀⠀⠀⣳⣼⣿⡏⢸⣿⣿⣿⢀⠀
⠀⠀⠀⣰⣿⣿⡿⠁⢸⣿⣿⡟⣼⡆
⢰⢀⣾⣿⣿⠟⠀⠀⣾⢿⣿⣿⣿⣿
⢸⣿⣿⣿⡏⠀⠀⠀⠃⠸⣿⣿⣿⡿
⢳⣿⣿⣿⠀⠀⠀⠀⠀⠀⢹⣿⡿⡁
⠀⠹⣿⣿⡄⠀⠀⠀⠀⠀⢠⣿⡞⠁
⠀⠀⠈⠛⢿⣄⠀⠀⠀⣠⠞⠋⠀⠀
⠀⠀⠀⠀⠀⠀⠉⠀⠀⠀⠀⠀⠀⠀</div>
    </div>
    <div class="torch-holder-ascii">╔═══════════╗
║  ╔═╗╔═╗  ║
║  ║╬║║╬║  ║
╠══╬═╬═╬══╣
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
╚══╩═╩═╩══╝
   ║═══║
   ║═══║
   ║═══║
   ╚═══╝</div>
</div>
<div class="torch torch-right">
    <div class="torch-flame-container">
        <div class="torch-flame-ascii">⠀⠀⠀⠀⠀⠀⢱⣆⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠈⣿⣷⡀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢸⣿⣿⣷⣧⠀⠀⠀
⠀⠀⠀⠀⡀⢠⣿⡟⣿⣿⣿⡇⠀⠀
⠀⠀⠀⠀⣳⣼⣿⡏⢸⣿⣿⣿⢀⠀
⠀⠀⠀⣰⣿⣿⡿⠁⢸⣿⣿⡟⣼⡆
⢰⢀⣾⣿⣿⠟⠀⠀⣾⢿⣿⣿⣿⣿
⢸⣿⣿⣿⡏⠀⠀⠀⠃⠸⣿⣿⣿⡿
⢳⣿⣿⣿⠀⠀⠀⠀⠀⠀⢹⣿⡿⡁
⠀⠹⣿⣿⡄⠀⠀⠀⠀⠀⢠⣿⡞⠁
⠀⠀⠈⠛⢿⣄⠀⠀⠀⣠⠞⠋⠀⠀
⠀⠀⠀⠀⠀⠀⠉⠀⠀⠀⠀⠀⠀⠀</div>
    </div>
    <div class="torch-holder-ascii">╔═══════════╗
║  ╔═╗╔═╗  ║
║  ║╬║║╬║  ║
╠══╬═╬═╬══╣
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
║  ║▓▓▓▓▓║  ║
╚══╩═╩═╩══╝
   ║═══║
   ║═══║
   ║═══║
   ╚═══╝</div>
</div>
<div class="app crt-text scanline-move auth-hidden">
    <header>
        <div class="header-content">
            <div class="ascii-header-block">
                <div class="colorful-ascii">______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                    ______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                    ______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                    ______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                    _________/\\\\\\\\\\\\\\\_______/\\\\\_______/\\\_______/\\\__/\\\\\\\\\\\________/\\\\\\\\\____________/\\\\____________/\\\\_____/\\\\\\\\\___________/\\\\\\\\\__/\\\________/\\\__/\\\\\\\\\\\__/\\\\\_____/\\\__/\\\\\\\\\\\\\\\________
                    ________\///////\\\/////______/\\\///\\\____\///\\\___/\\\/__\/////\\\///______/\\\////////____________\/\\\\\\________/\\\\\\___/\\\\\\\\\\\\\______/\\\////////__\/\\\_______\/\\\_\/////\\\///__\/\\\\\\___\/\\\_\/\\\///////////_________
                    ______________\/\\\_________/\\\/__\///\\\____\///\\\\\\/________\/\\\_______/\\\/_____________________\/\\\//\\\____/\\\//\\\__/\\\/////////\\\___/\\\/___________\/\\\_______\/\\\_____\/\\\_____\/\\\/\\\__\/\\\_\/\\\____________________
                    ______________\/\\\________/\\\______\//\\\_____\//\\\\__________\/\\\______/\\\_______________________\/\\\\///\\\/\\\/_\/\\\_\/\\\_______\/\\\__/\\\_____________\/\\\\\\\\\\\\\\\_____\/\\\_____\/\\\//\\\_\/\\\_\/\\\\\\\\\\\____________
                    ______________\/\\\_______\/\\\_______\/\\\______\/\\\\__________\/\\\_____\/\\\_______________________\/\\\__\///\\\/___\/\\\_\/\\\\\\\\\\\\\\\_\/\\\_____________\/\\\/////////\\\_____\/\\\_____\/\\\\//\\\\/\\\_\/\\\///////_____________
                    ______________\/\\\_______\//\\\______/\\\_______/\\\\\\_________\/\\\_____\//\\\______________________\/\\\____\///_____\/\\\_\/\\\/////////\\\_\//\\\____________\/\\\_______\/\\\_____\/\\\_____\/\\\_\//\\\/\\\_\/\\\____________________
                    ______________\/\\\________\///\\\__/\\\_______/\\\////\\\_______\/\\\______\///\\\____________________\/\\\_____________\/\\\_\/\\\_______\/\\\__\///\\\__________\/\\\_______\/\\\_____\/\\\_____\/\\\__\//\\\\\\_\/\\\____________________
                    ______________\/\\\__________\///\\\\\/______/\\\/___\///\\\__/\\\\\\\\\\\____\////\\\\\\\\\___________\/\\\_____________\/\\\_\/\\\_______\/\\\____\////\\\\\\\\\_\/\\\_______\/\\\__/\\\\\\\\\\\_\/\\\___\//\\\\\_\/\\\\\\\\\\\\\\\________
                    ______________\///_____________\/////_______\///_______\///__\///////////________\/////////____________\///______________\///__\///________\///________\/////////__\///________\///__\///////////__\///_____\/////__\///////////////_________
                    ______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________</div>
                <div id="ascii-skeleton-strip"></div>
            </div>
            <nav role="navigation" aria-label="Main navigation">
                <button class="nav-btn active" data-page="dashboard" data-asciify="sm" role="tab" aria-selected="true" aria-controls="dashboard">[ ДАШБОРД ]</button>
                <button class="nav-btn" data-page="course" data-asciify="sm" role="tab" aria-selected="false" aria-controls="course">[ КУРС ]</button>
                <button class="nav-btn" data-page="analyses" data-asciify="sm" role="tab" aria-selected="false" aria-controls="analyses">[ АНАЛИЗЫ ]</button>
                <button class="nav-btn" data-page="compare" data-asciify="sm" role="tab" aria-selected="false" aria-controls="compare">[ СРАВНЕНИЕ ]</button>
                <button class="nav-btn" data-page="workouts" data-asciify="sm" role="tab" aria-selected="false" aria-controls="workouts">[ ТРЕНИРОВКИ ]</button>
                <button class="nav-btn" data-page="encyclopedia" data-asciify="sm" role="tab" aria-selected="false" aria-controls="encyclopedia">[ ЭНЦИКЛОПЕДИЯ ]</button>
                <button class="nav-btn" data-page="ascii-studio" data-asciify="sm" role="tab" aria-selected="false" aria-controls="ascii-studio">[ ASCII ART ]</button>
                <button class="nav-btn nav-btn-admin" data-page="admin" data-asciify="sm" role="tab" aria-selected="false" aria-controls="admin" id="admin-nav-btn" style="display:none">[ АДМИН ]</button>
            </nav>
        </div>
    </header>

    <div class="user-info" id="user-info" style="display: none;">
        <span class="user-email" id="user-email-display"></span>
        <div class="offline-badge" aria-live="polite">⚡ OFFLINE</div>
        <button class="logout-btn" onclick="window.auth.logout()">[ ВЫХОД ]</button>
    </div>

    <div class="color-picker-container">
        <button class="color-picker-toggle" onclick="toggleColorPicker()">[ ЦВЕТ ]</button>
        <div class="color-picker-panel" id="color-picker-panel">
            <div class="color-presets">
                <div class="color-preset" style="background: #00ff00;" onclick="setColor('#00ff00')" title="Зеленый"></div>
                <div class="color-preset" style="background: #00ffff;" onclick="setColor('#00ffff')" title="Голубой"></div>
                <div class="color-preset" style="background: #ff00ff;" onclick="setColor('#ff00ff')" title="Пурпурный"></div>
                <div class="color-preset" style="background: #ffff00;" onclick="setColor('#ffff00')" title="Желтый"></div>
                <div class="color-preset" style="background: #ff6600;" onclick="setColor('#ff6600')" title="Оранжевый"></div>
                <div class="color-preset" style="background: #ff0066;" onclick="setColor('#ff0066')" title="Розовый"></div>
                <div class="color-preset" style="background: #00ff66;" onclick="setColor('#00ff66')" title="Лайм"></div>
                <div class="color-preset" style="background: #6600ff;" onclick="setColor('#6600ff')" title="Фиолетовый"></div>
            </div>
            <div class="color-custom">
                <input type="color" id="custom-color" value="#00ff00" onchange="setColor(this.value)">
                <input type="text" id="custom-color-text" value="#00ff00" placeholder="#00ff00" onchange="setColor(this.value)">
            </div>
            <div class="font-picker" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
                <div style="margin-bottom: 10px; font-size: 12px; color: var(--text-secondary);">ШРИФТ:</div>
                <div style="display: flex; gap: 8px;">
                    <button class="font-preset" onclick="setFont('rotasuningr')" style="flex: 1; padding: 8px; background: transparent; border: 1px solid var(--border); color: var(--text-primary); cursor: pointer; font-family: var(--ascii-font-family);">Rotasuningr</button>
                    <button class="font-preset" onclick="setFont('ibm')" style="flex: 1; padding: 8px; background: transparent; border: 1px solid var(--border); color: var(--text-primary); cursor: pointer; font-family: var(--ascii-font-family);">IBM MDA</button>
                </div>
            </div>
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
                <div style="margin-bottom: 10px; font-size: 12px; color: var(--text-secondary);">ASCII ЗАГОЛОВКИ:</div>
                <button id="asciify-toggle-btn" class="asciify-toggle active" onclick="window.asciify.toggle()">[ ASCII: ON ]</button>
            </div>
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
                <div style="margin-bottom: 10px; font-size: 12px; color: var(--text-secondary);">WEBGL ШЕЙДЕР:</div>
                <button id="shader-toggle-btn" class="asciify-toggle active" onclick="window.toggleShaderBg()">[ ШЕЙДЕР: ON ]</button>
            </div>
        </div>
    </div>

    <!-- DASHBOARD PAGE -->
    <div class="page active" id="dashboard" role="tabpanel" aria-label="Dashboard">
        <div class="quick-actions">
            <button class="quick-action-btn" onclick="document.querySelector('[data-page=analyses]').click(); setTimeout(() => openAnalysisModal(), 100)">[ + АНАЛИЗ ]</button>
            <button class="quick-action-btn" onclick="document.querySelector('[data-page=course]').click(); setTimeout(() => openLogModal(), 100)">[ + ПРИЁМ ]</button>
            <button class="quick-action-btn" onclick="document.querySelector('[data-page=analyses]').click(); setTimeout(() => openPdfImportModal(), 100)">[ ИМПОРТ PDF ]</button>
        </div>
        <div class="dashboard-overview">
            <div class="dashboard-donut-container">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-asciify="md">[ ПРОГРЕСС КУРСА ]</div>
                    </div>
                    <div id="dashboard-donut-chart"></div>
                </div>
            </div>
            <div class="stat-cards">
                <div class="stat-card">
                    <h3>Текущий курс</h3>
                    <div class="stat-value" id="course-name" data-asciify="lg">—</div>
                    <div class="stat-sub" id="course-dates">Загрузка...</div>
                </div>
                <div class="stat-card">
                    <h3>День курса</h3>
                    <div class="stat-value" id="course-day" data-asciify="lg">—</div>
                    <div class="stat-sub" id="course-progress">—</div>
                </div>
                <div class="stat-card">
                    <h3>Анализов</h3>
                    <div class="stat-value" id="analyses-count" data-asciify="lg">0</div>
                    <div class="stat-sub" id="last-analysis">Нет данных</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ ПРЕПАРАТЫ КУРСА ]</div>
            </div>
            <div id="dashboard-drugs"><div class="loading">Загрузка...</div></div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ ПОКАЗАТЕЛИ, ТРЕБУЮЩИЕ ВНИМАНИЯ ]</div>
            </div>
            <div id="dashboard-alerts"><div class="loading">Загрузка...</div></div>
        </div>
    </div>

    <!-- COURSE PAGE -->
    <div class="page" id="course" role="tabpanel" aria-label="Course">
        <!-- Tabs Navigation -->
        <div class="course-tabs">
            <button class="course-tab active" data-tab="drugs">[ ПРЕПАРАТЫ ]</button>
            <button class="course-tab" data-tab="logs">[ ЛОГИ ПРИЁМА ]</button>
            <button class="course-tab" data-tab="inventory">[ РЕЕСТР ]</button>
            <button class="course-tab" data-tab="statistics">[ СТАТИСТИКА ]</button>
        </div>

        <!-- Tab 1: Drugs -->
        <div class="course-tab-content active" id="tab-drugs">
            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ НАСТРОЙКИ КУРСА ]</div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Название курса</label>
                        <input type="text" id="course-title" placeholder="Например: Первый курс">
                    </div>
                    <div class="form-group">
                        <label>Дата начала</label>
                        <input type="date" id="course-start">
                    </div>
                    <div class="form-group">
                        <label>Дата окончания</label>
                        <input type="date" id="course-end">
                    </div>
                </div>
                <div class="form-group">
                    <label>Заметки</label>
                    <textarea id="course-notes" rows="3" placeholder="Цели курса, особенности..."></textarea>
                </div>
                <button class="btn" onclick="saveCourse()">[ СОХРАНИТЬ КУРС ]</button>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ ПРЕПАРАТЫ ]</div>
                    <button class="btn" onclick="openDrugModal()">[ + ДОБАВИТЬ ПРЕПАРАТ ]</button>
                </div>
                <div id="drugs-list"><div class="loading">Загрузка...</div></div>
            </div>
        </div>

        <!-- Tab 2: Intake Logs -->
        <div class="course-tab-content" id="tab-logs">
            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ ФИЛЬТРЫ ]</div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Препарат</label>
                        <select id="filter-drug">
                            <option value="">Все препараты</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>С даты</label>
                        <input type="date" id="filter-start-date">
                    </div>
                    <div class="form-group">
                        <label>По дату</label>
                        <input type="date" id="filter-end-date">
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="window.courseTabs.resetFilters()">[ СБРОСИТЬ ]</button>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ ЛОГ ПРИЁМА ]</div>
                    <button class="btn" onclick="openLogModal()">[ + ДОБАВИТЬ ЗАПИСЬ ]</button>
                </div>
                <div id="filtered-intake-log"><div class="loading">Загрузка...</div></div>
            </div>
        </div>

        <!-- Tab 3: Inventory -->
        <div class="course-tab-content" id="tab-inventory">
            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ ИНВЕНТАРИЗАЦИЯ ПРЕПАРАТОВ ]</div>
                </div>
                <div id="inventory-table"><div class="loading">Загрузка...</div></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ ИСТОРИЯ ПОКУПОК ]</div>
                    <button class="btn" onclick="window.purchaseModals.openPurchaseModal()">[ + ДОБАВИТЬ ПОКУПКУ ]</button>
                </div>
                <div id="purchases-list"><div class="loading">Загрузка...</div></div>
            </div>
        </div>

        <!-- Tab 4: Statistics -->
        <div class="course-tab-content" id="tab-statistics">
            <div class="card">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ ВЫБОР ПРЕПАРАТА ]</div>
                </div>
                <div class="form-group">
                    <label>Препарат для статистики</label>
                    <select id="stats-drug">
                        <option value="">Выберите препарат...</option>
                    </select>
                </div>
            </div>

            <div id="stats-cards-container" style="display: none;">
                <div class="stats-overview">
                    <div class="stats-donut-container">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title" data-asciify="md">[ ПРОГРЕСС УПОТРЕБЛЕНИЯ ]</div>
                            </div>
                            <div id="stats-donut-chart"></div>
                        </div>
                    </div>
                    <div class="stat-cards">
                        <div class="stat-card">
                            <h3>Принято</h3>
                            <div class="stat-value" id="stat-consumed" data-asciify="lg">0</div>
                            <div class="stat-sub">доз</div>
                        </div>
                        <div class="stat-card">
                            <h3>Куплено</h3>
                            <div class="stat-value" id="stat-purchased" data-asciify="lg">0</div>
                            <div class="stat-sub">доз</div>
                        </div>
                        <div class="stat-card">
                            <h3>Остаток</h3>
                            <div class="stat-value" id="stat-stock" data-asciify="lg">0</div>
                            <div class="stat-sub" id="stat-stock-sub">доз</div>
                        </div>
                        <div class="stat-card">
                            <h3>Потрачено</h3>
                            <div class="stat-value" id="stat-spent" data-asciify="lg">0₽</div>
                            <div class="stat-sub">рублей</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-asciify="md">[ ГРАФИК ПРИЕМА ]</div>
                    </div>
                    <div id="consumption-chart"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title" data-asciify="md">[ ПОКУПКИ VS ПРИЕМ ]</div>
                    </div>
                    <div id="purchase-vs-consumption-chart"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ANALYSES PAGE -->
    <div class="page" id="analyses" role="tabpanel" aria-label="Analyses">
        <div class="card">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ МОИ АНАЛИЗЫ ]</div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn" onclick="openAnalysisModal()">+ Добавить вручную</button>
                    <button class="btn btn-secondary" onclick="openPdfImportModal()">[ ИМПОРТ PDF ]</button>
                </div>
            </div>

            <div class="analysis-selector">
                <label>Просмотр:</label>
                <select id="analysis-select" onchange="displayAnalysis()">
                    <option value="">Выберите анализ...</option>
                </select>
                <button class="btn btn-secondary btn-small" onclick="editCurrentAnalysis()">[ РЕДАКТИРОВАТЬ ]</button>
                <button class="btn btn-secondary btn-small" onclick="deleteCurrentAnalysis()">[ УДАЛИТЬ ]</button>
                <button class="btn btn-secondary btn-small" onclick="copyAnalysisAsMarkdown()">[ КОПИРОВАТЬ КАК MD ]</button>
            </div>

            <div class="legend">
                <div class="legend-item"><span class="indicator ind-normal"></span> В норме</div>
                <div class="legend-item"><span class="indicator ind-low"></span> Снижен</div>
                <div class="legend-item"><span class="indicator ind-slightly-high"></span> Чуть выше</div>
                <div class="legend-item"><span class="indicator ind-high"></span> Повышен</div>
            </div>

            <div id="analysis-content">
                <div class="empty-state"><h3>Выберите или добавьте анализ</h3></div>
            </div>

            <div id="protein-graph-container" style="margin-top: 20px; display: none; overflow-x: auto;">
                <div class="card-title" style="margin-bottom:10px;">[ ЭЛЕКТРОФОРЕЗ БЕЛКОВЫХ ФРАКЦИЙ ]</div>
                <div id="protein-graph" style="max-width: 100%;"></div>
            </div>
        </div>

        <div class="card" id="trend-chart-card" style="display: none;">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ ТРЕНД ПАРАМЕТРА ]</div>
            </div>
            <div style="padding: 20px;">
                <div class="form-group" style="margin-bottom: 16px;">
                    <label>Параметр для графика</label>
                    <select id="trend-param-select" onchange="onTrendParamChange()">
                        <option value="">Выберите параметр...</option>
                    </select>
                </div>
                <div id="trend-chart-container" style="min-height: 300px;"></div>
            </div>
        </div>
    </div>

    <!-- COMPARE PAGE -->
    <div class="page" id="compare" role="tabpanel" aria-label="Compare">
        <div class="card">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ СРАВНЕНИЕ АНАЛИЗОВ ]</div>
            </div>

            <div class="form-row" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label>Анализ 1 (до)</label>
                    <select id="compare-before" onchange="compareAnalyses()">
                        <option value="">Выберите...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Анализ 2 (после)</label>
                    <select id="compare-after" onchange="compareAnalyses()">
                        <option value="">Выберите...</option>
                    </select>
                </div>
            </div>

            <div id="compare-content">
                <div class="empty-state"><h3>Выберите два анализа для сравнения</h3></div>
            </div>
        </div>
    </div>

    <!-- WORKOUTS PAGE -->
    <div class="page" id="workouts" role="tabpanel" aria-label="Workouts">
        <div class="card">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ ТРЕНИРОВКИ НЕДЕЛИ ]</div>
                <button class="btn-primary" onclick="window.openWorkoutProgramModal()">+ Создать программу</button>
            </div>
            <div class="workouts-layout">
                <div class="workouts-panel">
                    <div class="workouts-panel-title">[ ПРОГРАММЫ ]</div>
                    <div id="workout-programs" class="workout-programs"></div>
                </div>
                <div class="workouts-panel">
                    <div class="workouts-panel-title">[ ДНИ НЕДЕЛИ ]</div>
                    <div id="workout-days" class="workout-days"></div>
                </div>
                <div class="workouts-panel">
                    <div class="workouts-panel-title">[ УПРАЖНЕНИЯ ]</div>
                    <div id="workout-exercises" class="workout-exercises"></div>
                </div>
                <div class="workouts-panel">
                    <div class="workouts-panel-title">[ ПОДХОДЫ ]</div>
                    <div id="workout-sets" class="workout-sets"></div>
                </div>
                <div class="workouts-panel">
                    <div class="workouts-panel-title">[ ГРУППА МЫШЦ ]</div>
                    <pre id="muscle-ascii" class="muscle-ascii"></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- ENCYCLOPEDIA PAGE -->
    <div class="page" id="encyclopedia" role="tabpanel" aria-label="Encyclopedia">
        <div class="card">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ ЭНЦИКЛОПЕДИЯ ПРЕПАРАТОВ ]</div>
            </div>
            <div class="encyclopedia-search">
                <input type="text" id="encyclopedia-search" placeholder="Поиск по названию, веществу, действию...">
            </div>
            <div class="encyclopedia-tabs" id="encyclopedia-tabs"></div>
            <div class="encyclopedia-grid" id="encyclopedia-grid"></div>
        </div>
        <div class="card">
            <div class="card-header">
                <div class="card-title" data-asciify="md">[ ПРОИЗВОДИТЕЛИ ]</div>
            </div>
            <div class="encyclopedia-tabs" id="mfr-tabs">
                <button class="encyclopedia-tab active" data-mfr-type="all">ВСЕ</button>
                <button class="encyclopedia-tab" data-mfr-type="0">ФАРМА</button>
                <button class="encyclopedia-tab" data-mfr-type="1">UGL</button>
            </div>
            <div class="mfr-grid" id="mfr-grid"></div>
        </div>
    </div>

    <!-- ASCII ART STUDIO PAGE -->
    <div class="page" id="ascii-studio" role="tabpanel" aria-label="ASCII Art Studio">
        <div id="ascii-art-studio"></div>
    </div>

    <!-- ADMIN PAGE -->
    <div class="page" id="admin" role="tabpanel" aria-label="Admin Panel">
        <div id="admin-panel"></div>
    </div>
</div>

<!-- MODALS -->
<div class="modal-overlay" id="drug-modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="drug-modal-title">
        <div class="modal-header">
            <h2 id="drug-modal-title">[ ДОБАВИТЬ ПРЕПАРАТ ]</h2>
            <button class="modal-close" onclick="closeDrugModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group catalog-autocomplete">
                <label>Субстанция (из каталога)</label>
                <input type="text" id="drug-catalog-search" placeholder="Начните вводить название..." autocomplete="off">
                <input type="hidden" id="drug-catalog-id">
                <div class="catalog-dropdown" id="drug-catalog-dropdown"></div>
            </div>
            <div class="substance-info-panel" id="substance-info-panel">
                <div class="info-header">
                    <span class="info-title" id="substance-info-title"></span>
                    <button class="info-close" onclick="window.clearSubstanceInfo()">&times;</button>
                </div>
                <div id="substance-info-body"></div>
            </div>
            <div class="form-group">
                <label>Название препарата</label>
                <input type="text" id="drug-name" placeholder="Например: Тестостерон энантат">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Тип</label>
                    <select id="drug-type">
                        <option value="0">[ ОРАЛЬНЫЙ ]</option>
                        <option value="1">[ ИНЪЕКЦИОННЫЙ ]</option>
                        <option value="2">[ ПОДКОЖНЫЙ ]</option>
                        <option value="3">[ ТРАНСДЕРМАЛЬНЫЙ ]</option>
                        <option value="4">[ НАЗАЛЬНЫЙ ]</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Дозировка</label>
                    <input type="text" id="drug-dosage" placeholder="250мг/мл">
                </div>
            </div>
            <div class="form-group mfr-dropdown">
                <label>Производитель</label>
                <input type="text" id="drug-mfr-search" placeholder="Выберите производителя..." autocomplete="off">
                <input type="hidden" id="drug-mfr-id">
                <div class="mfr-dropdown-list" id="drug-mfr-dropdown"></div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Количество</label>
                    <input type="text" id="drug-amount" placeholder="10мл или 60 таб">
                </div>
                <div class="form-group">
                    <label>Схема приёма</label>
                    <input type="text" id="drug-schedule" placeholder="250мг E3D">
                </div>
            </div>
            <div class="form-group">
                <label>Заметки</label>
                <textarea id="drug-notes" rows="3" placeholder="Дополнительная информация..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeDrugModal()">Отмена</button>
            <button class="btn" onclick="saveDrug()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="log-modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="log-modal-title">
        <div class="modal-header">
            <h2 id="log-modal-title">[ ДОБАВИТЬ ЗАПИСЬ ]</h2>
            <button class="modal-close" onclick="closeLogModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-row">
                <div class="form-group">
                    <label>Дата</label>
                    <input type="date" id="log-date">
                </div>
                <div class="form-group">
                    <label>Препарат</label>
                    <select id="log-drug"></select>
                </div>
            </div>
            <div class="form-group">
                <label>Источник (покупка)</label>
                <select id="log-purchase">
                    <option value="">Авто</option>
                </select>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Доза</label>
                    <input type="text" id="log-dose" placeholder="250мг">
                </div>
                <div class="form-group">
                    <label>Место / заметка</label>
                    <input type="text" id="log-note" placeholder="Дельта правая">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeLogModal()">Отмена</button>
            <button class="btn" onclick="saveLog()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="pdf-import-modal">
    <div class="modal">
        <div class="modal-header">
            <h2>[ ИМПОРТ АНАЛИЗА ИЗ PDF ]</h2>
            <button class="modal-close" onclick="closePdfImportModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>PDF файл с анализами (KDL, Инвитро, Гемотест и др.)</label>
                <input type="file" id="pdf-file" accept=".pdf" style="padding: 15px; border: 2px dashed var(--border); border-radius: 8px; cursor: pointer;">
            </div>
            <div class="form-group">
                <label>Метка анализа (опционально)</label>
                <input type="text" id="pdf-label" placeholder="До курса / После курса / ПКТ">
            </div>
            <div id="pdf-import-status" style="display: none; margin-top: 15px; padding: 15px; border-radius: 8px;"></div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closePdfImportModal()">Отмена</button>
            <button class="btn" id="pdf-import-btn" onclick="importPdf()">[ ИМПОРТИРОВАТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="analysis-modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="analysis-modal-title">
        <div class="modal-header">
            <h2 id="analysis-modal-title">[ ДОБАВИТЬ АНАЛИЗ ]</h2>
            <button class="modal-close" onclick="closeAnalysisModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-row">
                <div class="form-group">
                    <label>Дата анализа</label>
                    <input type="date" id="analysis-date">
                </div>
                <div class="form-group">
                    <label>Метка</label>
                    <input type="text" id="analysis-label" placeholder="До курса / После курса">
                </div>
                <div class="form-group">
                    <label>Лаборатория</label>
                    <input type="text" id="analysis-lab" placeholder="KDL, Инвитро...">
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" data-tab="hormones">Гормоны</button>
                <button class="tab" data-tab="lipids">Липиды</button>
                <button class="tab" data-tab="liver">Печень</button>
                <button class="tab" data-tab="general">Общие</button>
            </div>

            <div class="tab-content active" id="tab-hormones">
                <div class="form-row">
                    <div class="form-group"><label>Тестостерон общий</label><input type="number" step="0.01" id="val-testosterone" placeholder="8.33-30.19"></div>
                    <div class="form-group"><label>Тестостерон свободный</label><input type="number" step="0.0001" id="val-free-testosterone" placeholder="0.22-0.77"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>ЛГ</label><input type="number" step="0.01" id="val-lh" placeholder="0.57-12.07"></div>
                    <div class="form-group"><label>ФСГ</label><input type="number" step="0.01" id="val-fsh" placeholder="0.95-11.95"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>Пролактин</label><input type="number" step="0.01" id="val-prolactin" placeholder="72.66-407.40"></div>
                    <div class="form-group"><label>Эстрадиол</label><input type="number" step="0.01" id="val-estradiol" placeholder="40-161"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>ГСПГ</label><input type="number" step="0.01" id="val-shbg" placeholder="16.2-68.5"></div>
                    <div class="form-group"><label>ТТГ</label><input type="number" step="0.0001" id="val-tsh" placeholder="0.35-4.94"></div>
                </div>
            </div>

            <div class="tab-content" id="tab-lipids">
                <div class="form-row">
                    <div class="form-group"><label>Холестерин общий</label><input type="number" step="0.01" id="val-cholesterol" placeholder="3.4-6.3"></div>
                    <div class="form-group"><label>ЛПВП / HDL</label><input type="number" step="0.01" id="val-hdl" placeholder=">1.03"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>ЛПНП / LDL</label><input type="number" step="0.01" id="val-ldl" placeholder="<2.6"></div>
                    <div class="form-group"><label>Триглицериды</label><input type="number" step="0.01" id="val-triglycerides" placeholder="<1.7"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>Коэфф. атерогенности</label><input type="number" step="0.1" id="val-atherogenic" placeholder="1.0-2.5"></div>
                </div>
            </div>

            <div class="tab-content" id="tab-liver">
                <div class="form-row">
                    <div class="form-group"><label>АЛТ</label><input type="number" step="0.1" id="val-alt" placeholder="<50"></div>
                    <div class="form-group"><label>АСТ</label><input type="number" step="0.1" id="val-ast" placeholder="<50"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>ГГТ</label><input type="number" step="0.1" id="val-ggt" placeholder="<55"></div>
                    <div class="form-group"><label>Билирубин общий</label><input type="number" step="0.1" id="val-bilirubin" placeholder="5-21"></div>
                </div>
            </div>

            <div class="tab-content" id="tab-general">
                <div class="form-row">
                    <div class="form-group"><label>Гемоглобин</label><input type="number" step="0.1" id="val-hemoglobin" placeholder="130-170"></div>
                    <div class="form-group"><label>Гематокрит</label><input type="number" step="0.1" id="val-hematocrit" placeholder="39-49"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>Глюкоза</label><input type="number" step="0.01" id="val-glucose" placeholder="3.9-6.1"></div>
                    <div class="form-group"><label>Витамин D</label><input type="number" step="0.1" id="val-vitd" placeholder="30-100"></div>
                </div>
            </div>

            <div class="card" style="margin-top: 15px;">
                <div class="card-header">
                    <div class="card-title" data-asciify="md">[ ДОПОЛНИТЕЛЬНЫЕ ПОКАЗАТЕЛИ ]</div>
                    <button class="btn btn-secondary btn-small" onclick="addExtraRow()">[ + ДОБАВИТЬ ]</button>
                </div>
                <div id="extra-rows"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeAnalysisModal()">Отмена</button>
            <button class="btn" onclick="saveAnalysis()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="workout-program-modal">
    <div class="modal">
        <div class="modal-header">
            <h2 id="workout-program-modal-title">[ СОЗДАТЬ ПРОГРАММУ ]</h2>
            <button class="modal-close" onclick="window.closeWorkoutProgramModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Название программы</label>
                <input type="text" id="workout-program-title" placeholder="Например: Набор массы">
            </div>
            <div class="form-group">
                <label>Заметки</label>
                <textarea id="workout-program-notes" rows="3" placeholder="Описание программы, цели..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="window.closeWorkoutProgramModal()">Отмена</button>
            <button class="btn" onclick="window.saveWorkoutProgram()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="workout-day-modal">
    <div class="modal">
        <div class="modal-header">
            <h2 id="workout-day-modal-title">[ СОЗДАТЬ ДЕНЬ ]</h2>
            <button class="modal-close" onclick="window.closeWorkoutDayModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>День недели</label>
                <select id="workout-day-dayofweek">
                    <option value="0">Понедельник</option>
                    <option value="1">Вторник</option>
                    <option value="2">Среда</option>
                    <option value="3">Четверг</option>
                    <option value="4">Пятница</option>
                    <option value="5">Суббота</option>
                    <option value="6">Воскресенье</option>
                </select>
            </div>
            <div class="form-group">
                <label>Название (опционально)</label>
                <input type="text" id="workout-day-title" placeholder="Например: Грудь + трицепс">
            </div>
            <div class="form-group">
                <label>Заметки</label>
                <textarea id="workout-day-notes" rows="3" placeholder="Описание тренировочного дня..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="window.closeWorkoutDayModal()">Отмена</button>
            <button class="btn" onclick="window.saveWorkoutDay()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="workout-exercise-modal">
    <div class="modal">
        <div class="modal-header">
            <h2 id="workout-exercise-modal-title">[ СОЗДАТЬ УПРАЖНЕНИЕ ]</h2>
            <button class="modal-close" onclick="window.closeWorkoutExerciseModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Выбрать из каталога (опционально)</label>
                <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                    <input type="text" id="exercise-catalog-search" placeholder="Поиск упражнения..." style="flex: 1;">
                    <select id="exercise-catalog-filter" style="width: 150px;">
                        <option value="">Все группы</option>
                        <option value="0">Все тело</option>
                        <option value="1">Грудь</option>
                        <option value="2">Спина</option>
                        <option value="3">Плечи</option>
                        <option value="4">Бицепс</option>
                        <option value="5">Трицепс</option>
                        <option value="6">Предплечья</option>
                        <option value="7">Пресс</option>
                        <option value="8">Ягодицы</option>
                        <option value="9">Квадрицепс</option>
                        <option value="10">Бицепс бедра</option>
                        <option value="11">Икры</option>
                    </select>
                </div>
                <div id="exercise-catalog-list" style="max-height: 250px; overflow-y: auto; border: 1px solid var(--border); padding: 8px; margin-bottom: 8px; background: var(--bg-secondary, rgba(0,0,0,0.2)); border-radius: 4px;"></div>
                <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">
                    💡 Если каталог пуст, добавьте упражнение вручную ниже
                </div>
            </div>
            <div class="form-group">
                <label>Название упражнения</label>
                <input type="text" id="workout-exercise-name" placeholder="Например: Жим лёжа">
            </div>
            <div class="form-group">
                <label>Группа мышц</label>
                <select id="workout-exercise-musclegroup">
                    <option value="0">Все тело</option>
                    <option value="1">Грудь</option>
                    <option value="2">Спина</option>
                    <option value="3">Плечи</option>
                    <option value="4">Бицепс</option>
                    <option value="5">Трицепс</option>
                    <option value="6">Предплечья</option>
                    <option value="7">Пресс</option>
                    <option value="8">Ягодицы</option>
                    <option value="9">Квадрицепс</option>
                    <option value="10">Бицепс бедра</option>
                    <option value="11">Икры</option>
                </select>
            </div>
            <div class="form-group">
                <label>Заметки</label>
                <textarea id="workout-exercise-notes" rows="3" placeholder="Техника выполнения, оборудование..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="window.closeWorkoutExerciseModal()">Отмена</button>
            <button class="btn" onclick="window.saveWorkoutExercise()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="workout-set-modal">
    <div class="modal">
        <div class="modal-header">
            <h2 id="workout-set-modal-title">[ СОЗДАТЬ ПОДХОД ]</h2>
            <button class="modal-close" onclick="window.closeWorkoutSetModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-row">
                <div class="form-group">
                    <label>Повторения</label>
                    <input type="number" id="workout-set-repetitions" placeholder="12" min="1">
                </div>
                <div class="form-group">
                    <label>Вес (кг)</label>
                    <input type="number" id="workout-set-weight" placeholder="60" step="0.5" min="0">
                </div>
            </div>
            <div class="form-group">
                <label>Длительность (опционально)</label>
                <input type="text" id="workout-set-duration" placeholder="00:01:30 (ч:м:с)">
            </div>
            <div class="form-group">
                <label>Заметки</label>
                <textarea id="workout-set-notes" rows="2" placeholder="Дополнительная информация..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="window.closeWorkoutSetModal()">Отмена</button>
            <button class="btn" onclick="window.saveWorkoutSet()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="purchase-modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="purchase-modal-title">
        <div class="modal-header">
            <h2 id="purchase-modal-title">[ ДОБАВИТЬ ПОКУПКУ ]</h2>
            <button class="modal-close" onclick="window.purchaseModals.closePurchaseModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-row">
                <div class="form-group">
                    <label>Препарат</label>
                    <select id="purchase-drug"></select>
                </div>
                <div class="form-group">
                    <label>Дата покупки</label>
                    <input type="date" id="purchase-date">
                </div>
            </div>
            <div class="form-group mfr-dropdown">
                <label>Производитель</label>
                <input type="text" id="purchase-mfr-search" placeholder="Выберите производителя..." autocomplete="off">
                <input type="hidden" id="purchase-mfr-id">
                <div class="mfr-dropdown-list" id="purchase-mfr-dropdown"></div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Количество (доз)</label>
                    <input type="number" id="purchase-quantity" placeholder="10" min="1">
                </div>
                <div class="form-group">
                    <label>Цена (₽)</label>
                    <input type="number" id="purchase-price" placeholder="2000" step="0.01" min="0">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Продавец / Аптека</label>
                    <input type="text" id="purchase-vendor" placeholder="Название аптеки или поставщика">
                </div>
            </div>
            <div class="form-group">
                <label>Заметки</label>
                <textarea id="purchase-notes" rows="3" placeholder="Дополнительная информация..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="window.purchaseModals.closePurchaseModal()">Отмена</button>
            <button class="btn" onclick="window.purchaseModals.savePurchase()">[ СОХРАНИТЬ ]</button>
        </div>
    </div>
</div>

<!-- Anti-reload-loop guard. Runs BEFORE any ES6 modules load. -->
<!-- Detects rapid reloads (401 → reload → 401 loop) and breaks the cycle. -->
<script>
(function() {
    var key = '_bt_rl', now = Date.now();
    var last = parseInt(sessionStorage.getItem(key) || '0');
    if (now - last < 3000) {
        // Rapid reload detected — break the loop by clearing stale tokens
        localStorage.removeItem('bt_token');
        localStorage.removeItem('bt_user');
        sessionStorage.removeItem(key);
        return;
    }
    sessionStorage.setItem(key, String(now));
    setTimeout(function() { sessionStorage.removeItem(key); }, 5000);
})();
</script>

<!-- Google Sign-In -->
<script>
    // Initialize Google Sign-In after GSI library loads
    window.initGoogleSignIn = function() {
        const clientId = document.querySelector('meta[name="google-client-id"]')?.content;
        if (clientId && window.google?.accounts?.id) {
            google.accounts.id.initialize({
                client_id: clientId,
                callback: window.handleGoogleCredential
            });
        }
    };
</script>
<script src="https://accounts.google.com/gsi/client" async defer onload="initGoogleSignIn()"></script>

<!-- ApexCharts -->
<!-- Research Modal -->
<div class="research-modal-overlay" id="research-modal-overlay">
    <div class="research-modal">
        <div class="research-modal-header">
            <span class="research-modal-title" id="research-modal-title">ИССЛЕДОВАНИЯ</span>
            <button class="research-modal-close" id="research-modal-close">[ X ]</button>
        </div>
        <div class="research-modal-body">
            <div class="research-tabs" id="research-tabs">
                <button class="research-tab active" data-tab="mechanism">МЕХАНИЗМ</button>
                <button class="research-tab" data-tab="studies">ИССЛЕДОВАНИЯ</button>
                <button class="research-tab" data-tab="bloodwork">АНАЛИЗЫ</button>
                <button class="research-tab" data-tab="interactions">ВЗАИМОДЕЙСТВИЯ</button>
                <button class="research-tab" data-tab="contra">ПРОТИВОПОКАЗАНИЯ</button>
                <button class="research-tab" data-tab="practical">ПРАКТИКА</button>
            </div>
            <div id="research-content"></div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>

<!-- JavaScript Module -->
<script type="module" src="dist/js/main.js?v=20260214b"></script>
</body>
</html>
