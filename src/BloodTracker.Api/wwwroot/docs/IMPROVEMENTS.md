# –¢–µ—Ö–¥–æ–ª–≥ –∏ —É–ª—É—á—à–µ–Ω–∏—è

## üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ–µ

### 1. XSS —á–µ—Ä–µ–∑ confirm()
–í `admin.js` ‚Äî `escHtml()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `div.textContent ‚Üí div.innerHTML`, –Ω–æ –≤ `deleteUser` email –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ confirm –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–∞ onclick:
```js
onclick="window.adminPage.deleteUser('${u.id}', '${escHtml(u.email)}')"
```
–ï—Å–ª–∏ email —Å–æ–¥–µ—Ä–∂–∏—Ç `'`, —ç—Ç–æ —Å–ª–æ–º–∞–µ—Ç onclick. –ù—É–∂–µ–Ω escaping –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ `addEventListener`.

### 2. –ù–µ—Ç CSP / sanitization –¥–ª—è innerHTML
–ü–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `innerHTML` —Å —à–∞–±–ª–æ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏. `escapeHtml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Content Security Policy.

---

## üü° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ state
`state.js` ‚Äî –ø—Ä–æ—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç. –ü–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞—Ç—å render. –ù–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫, –Ω–µ—Ç dirty checking.

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** Proxy-based reactive state –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π pub/sub:
```js
state.on('drugs', () => renderDrugs())
```

### 4. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- `drugTypeBadge()` –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ `course.js` –∏ `dashboard.js`
- `CATEGORY_NAMES` –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ `modals.js` –∏ `encyclopedia.js`
- `formatDate()` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ –≤ `admin.js` (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç utils.js)
- `escHtml()` –≤ admin.js ‚Äî —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤–º–µ—Å—Ç–æ `escapeHtml` –∏–∑ utils.js

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Ö–µ–ª–ø–µ—Ä—ã –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ shared –º–æ–¥—É–ª—å.

### 5. –ú–æ–¥–∞–ª–∫–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç style.display –≤–º–µ—Å—Ç–æ classList
`workoutModals.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `modal.style.display = 'flex'` / `'none'`, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–∞–ª–∫–∏ ‚Äî `classList.add('active')`. –ù—É–∂–Ω–∞ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è.

### 6. –ù–µ—Ç TypeScript / JSDoc
–¢–∏–ø—ã –Ω–∏–≥–¥–µ –Ω–µ –æ–ø–∏—Å–∞–Ω—ã. API-–æ—Ç–≤–µ—Ç—ã –Ω–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –ü—Ä–∏ —Ä–æ—Å—Ç–µ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã —ç—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é.

---

## üü¢ –£–ª—É—á—à–µ–Ω–∏—è UX

### 7. –ù–µ—Ç offline-—Ä–µ–∂–∏–º–∞ / –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
–ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ‚Äî –ø–æ–ª–Ω—ã–π fetch –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–µ—Ç Service Worker, –Ω–µ—Ç localStorage-–∫–µ—à–∞.

### 8. –ù–µ—Ç lazy loading —Å—Ç—Ä–∞–Ω–∏—Ü
–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–≤–∫–ª—é—á–∞—è admin, encyclopedia) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. `import()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö, –Ω–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π import –≤ main.js.

### 9. Skeleton loading –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
`skeleton.js` —Å–æ–∑–¥–∞—ë—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å–∫–µ–ª–µ—Ç–æ–Ω–æ–≤, –Ω–æ –æ–Ω–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—É—Å—Ç–æ–µ –º–µ—Å—Ç–æ –∏–ª–∏ "–ó–∞–≥—Ä—É–∑–∫–∞..." —Ç–µ–∫—Å—Ç.

### 10. –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
`intakeLogs` –∑–∞–≥—Ä—É–∂–∞–µ—Ç `?count=20`, –Ω–æ –Ω–µ—Ç "–∑–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë". Analyses –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Å—Ä–∞–∑—É.

### 11. –ù–µ—Ç debounce –Ω–∞ resize –¥–ª—è ASCII skull
Debounce –µ—Å—Ç—å (150ms), –Ω–æ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º resize –≤—Å—ë —Ä–∞–≤–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ—Ç–Ω—ã–π reflow.

### 12. –ù–µ—Ç mobile-first —Å—Ç–∏–ª–µ–π
–ù–∞–≤–∏–≥–∞—Ü–∏—è —Å box-drawing —Å–∏–º–≤–æ–ª–∞–º–∏ `‚ïî‚ïê‚ïê‚ïê‚ïó` –Ω–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–∞. –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –≤—Å—ë –º–µ–ª–∫–æ–µ.

---

## üîµ –ö–æ–¥-–∫–∞—á–µ—Å—Ç–≤–æ

### 13. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤
–ù–∏ unit-—Ç–µ—Å—Ç–æ–≤, –Ω–∏ e2e. –ö—Ä–∏—Ç–∏—á–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (getStatus, formatDate, escapeHtml) –Ω–µ –ø–æ–∫—Ä—ã—Ç–∞.

### 14. console.error –≤–º–µ—Å—Ç–æ toast –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –æ—à–∏–±–æ–∫
–ú–Ω–æ–≥–∏–µ `catch` –±–ª–æ–∫–∏ —Ç–æ–ª—å–∫–æ `console.error()`. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–∑–Ω–∞–µ—Ç, —á—Ç–æ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —É–¥–∞–ª–∞—Å—å.

### 15. Magic strings –¥–ª—è API paths
–ü—É—Ç–∏ —Ç–∏–ø–∞ `/analyses`, `/drugs`, `/courses/dashboard` —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É. –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–µ—Å—Ç—Ä–∞ endpoints.

### 16. –ù–µ—Ç –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ / –±–∞–Ω–¥–ª–∏–Ω–≥–∞
–§–∞–π–ª—ã –ø–æ–¥–∞—é—Ç—Å—è as-is. –î–µ—Å—è—Ç–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª–µ–π. –î–ª—è production –Ω—É–∂–µ–Ω bundler.

### 17. `muscleAscii.js` ‚Äî –æ–≥—Ä–æ–º–Ω—ã–π —Ñ–∞–π–ª (>500 —Å—Ç—Ä–æ–∫ ASCII art)
ASCII-–∞—Ä—Ç –º—ã—à—Ü –≤—Å—Ç—Ä–æ–µ–Ω –ø—Ä—è–º–æ –≤ JS. –ú–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ .txt —Ñ–∞–π–ª—ã –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é.

### 18. matrix-runes.js ‚Äî –∏–∑–±—ã—Ç–æ—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
5 –ø—Ä–æ—Ö–æ–¥–æ–≤ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–±–µ–ª–æ–≤ –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π ‚Äî –º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º.

### 19. –ù–µ—Ç error boundary
–ï—Å–ª–∏ –æ–¥–∏–Ω –º–æ–¥—É–ª—å –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –≤—Å—è `init()` –ø–∞–¥–∞–µ—Ç –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.

---

## üìã –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–¥–∞—á–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-----------|--------|-----------|
| P0 | #1 XSS –≤ admin onclick | –ù–∏–∑–∫–∞—è |
| P1 | #4 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | –°—Ä–µ–¥–Ω—è—è |
| P1 | #5 –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –º–æ–¥–∞–ª–æ–∫ | –ù–∏–∑–∫–∞—è |
| P1 | #14 Toast –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –æ—à–∏–±–æ–∫ | –ù–∏–∑–∫–∞—è |
| P2 | #9 Skeleton loading | –°—Ä–µ–¥–Ω—è—è |
| P2 | #3 Reactive state | –í—ã—Å–æ–∫–∞—è |
| P2 | #16 Bundling | –°—Ä–µ–¥–Ω—è—è |
| P3 | #7 Offline mode | –í—ã—Å–æ–∫–∞—è |
| P3 | #13 –¢–µ—Å—Ç—ã | –í—ã—Å–æ–∫–∞—è |
